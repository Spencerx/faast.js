---
id: faastjs.persistentcache
title: PersistentCache class
hide_title: true
---
<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[faastjs](./faastjs.md) &gt; [PersistentCache](./faastjs.persistentcache.md)

## PersistentCache class

A simple persistent key-value store. Used to implement [Limits.cache](./faastjs.limits.cache.md) for [throttle()](./faastjs.throttle.md)<!-- -->.

**Signature:**

```typescript
export declare class PersistentCache 
```

## Remarks

Entries can be expired, but are not actually deleted individually. The entire cache can be deleted at once. Hence this cache is useful for storing results that are expensive to compute but do not change too often (e.g. the node\_modules folder from an 'npm install' where 'package.json' is not expected to change too often).

By default faast.js will use the directory `~/.faastjs` as a local cache to store data such as pricing retrieved from cloud APIs, and garbage collection information. This directory can be safely deleted if no faast.js instances are running.

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(dirRelativeToHomeDir, expiration)](./faastjs.persistentcache._constructor_.md)


</td><td>


</td><td>

Construct a new persistent cache, typically used with [Limits](./faastjs.limits.md) as part of the arguments to [throttle()](./faastjs.throttle.md)<!-- -->.


</td></tr>
</tbody></table>

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[dir](./faastjs.persistentcache.dir.md)


</td><td>

`readonly`


</td><td>

string


</td><td>

The directory on disk where cached values are stored.


</td></tr>
<tr><td>

[dirRelativeToHomeDir](./faastjs.persistentcache.dirrelativetohomedir.md)


</td><td>

`readonly`


</td><td>

string


</td><td>

The directory under the user's home directory that will be used to store cached values. The directory will be created if it doesn't exist.


</td></tr>
<tr><td>

[expiration](./faastjs.persistentcache.expiration.md)


</td><td>

`readonly`


</td><td>

number


</td><td>

The age (in ms) after which a cached entry is invalid. Default: `24*3600*1000` (1 day).


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[clear({ leaveEmptyDir })](./faastjs.persistentcache.clear.md)


</td><td>


</td><td>

Deletes all cached entries from disk.


</td></tr>
<tr><td>

[entries()](./faastjs.persistentcache.entries.md)


</td><td>


</td><td>

Retrieve all keys stored in the cache, including expired entries.


</td></tr>
<tr><td>

[get(key)](./faastjs.persistentcache.get.md)


</td><td>


</td><td>

Retrieves the value previously set for the given key, or undefined if the key is not found.


</td></tr>
<tr><td>

[set(key, value)](./faastjs.persistentcache.set.md)


</td><td>


</td><td>

Set the cache key to the given value.


</td></tr>
</tbody></table>